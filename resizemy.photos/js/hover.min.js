function createLink(){var e=document.createElement("a"),t=chrome.extension.getURL("/icons/button-icon.png");e.innerHTML+="<img src='"+t+"'>",e.setAttribute("id","resizeMyPhoto"),e.setAttribute("target","_blank"),document.body.appendChild(e),cropperExtension.link=e}function setLinkVisibility(e){var t=cropperExtension.link,n=e?"block":"none";if(e){var o=getPosition(cropperExtension.curImage);t.style.top=o.top+10+"px",t.style.right=o.right+10+"px",t.href=chrome.extension.getURL("index.html#")+cropperExtension.curImage.src}t.style.display=n}function getPosition(e){var t=document.body.getBoundingClientRect(),n=e.getBoundingClientRect(),o=n.top-t.top,i=t.right-n.right;return{right:i,top:o}}function setLink(e){"IMG"===e.srcElement.nodeName&&e.srcElement!==cropperExtension.curImage&&e.srcElement.width>=150?(cropperExtension.curImage=e.srcElement,setLinkVisibility(!0)):"IMG"!==e.srcElement.nodeName&&e.srcElement!==cropperExtension.link&&(cropperExtension.curImage=null,setLinkVisibility(!1))}chrome.runtime.sendMessage({status:"getStatus"},function(e){"true"==e.status&&(cropperExtension.object||createLink(),document.addEventListener("mousemove",setLink,!0))}),chrome.runtime.onMessage.addListener(function(e,t,n){"true"==e.status?(cropperExtension.object=document.getElementById("resizeMyPhoto"),cropperExtension.object||createLink(),document.addEventListener("mousemove",setLink,!0)):(cropperExtension.object=document.getElementById("resizeMyPhoto"),cropperExtension.object&&document.body.removeChild(cropperExtension.link),document.removeEventListener("mousemove",setLink,!0))});var cropperExtension={};