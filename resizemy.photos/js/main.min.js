!function(e,t,n,a,o,i,c){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),c=t.getElementsByTagName(n)[0],i.async=1,i.src=a,c.parentNode.insertBefore(i,c)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-101979275-1","auto"),ga("set","checkProtocolTask",function(){}),ga("require","displayfeatures"),ga("send","pageview","/cropper.html"),window.onload=function(){"use strict";function e(e,t,n){w.innerHTML=e,M.innerHTML="Original size: "+t+"x"+n}function t(e,t){p.value=Math.round(e),v.value=Math.round(t)}function n(e,t){f.value=Math.round(e),y.value=Math.round(t)}function a(e,t){e&&e.classList.remove(t)}function o(e,t){e&&e.classList.add(t)}function i(e){return document.querySelector(e)}function c(e,t,n){u.setAttribute("data-option",'{ "width": '+Math.round(t)+', "height": '+Math.round(n)+" }"),u.setAttribute("data-file-name",e+"-"+Math.round(t)+"x"+Math.round(n))}var r=window.Cropper,d=document.getElementById("img-container"),u=document.getElementById("prepareImage"),l=document.getElementById("preset"),s=document.getElementById("crop"),g=document.getElementById("resize"),h=document.getElementById("preset-groups"),m=document.getElementById("download"),p=document.getElementById("dataWidth"),v=document.getElementById("dataHeight"),f=document.getElementById("cropDataWidth"),y=document.getElementById("cropDataHeight"),w=document.getElementById("file-name"),M=document.getElementById("file-size"),E=document.getElementById("cutomCrop"),B=document.getElementById("freeMode"),b=document.getElementById("resizePercent"),H=document.getElementById("resizeCustom"),I=function(){var e=0;return function(t,n){clearTimeout(e),e=setTimeout(t,n)}}(),k={aspectRatio:16/9,zoomable:!1,checkCrossOrigin:!0,ready:function(e){console.log(e.type)},cropstart:function(e){console.log(e.type,e.detail.action)},cropmove:function(e){console.log(e.type,e.detail.action)},cropend:function(e){console.log(e.type,e.detail.action)},crop:function(e){var t=e.detail;"crop"==i(".active-section").id&&1==B.checked&&(n(Math.round(t.width),Math.round(t.height)),c("freeMode",t.width,t.height),I(function(){ga("send","event","image","image cropped",'{ "width": '+Math.round(t.width)+', "height": '+Math.round(t.height)+" }")},1e3)),console.log(e.type)},zoom:function(e){console.log(e.type,e.detail.ratio)}},A=window.location.hash.substring(1),N=d.getElementsByTagName("img").item(0);if(A){N.src=A,ga("send","event","image","image loaded",A);var T=new XMLHttpRequest;T.open("GET",A,!0),T.onreadystatechange=function(){4==T.readyState&&new r(N,{ready:function(){W.replace(A)}})},T.send()}N.onload=function(){var n=N.getAttribute("src"),a=N.naturalWidth,o=N.naturalHeight;e(n,a,o),t(a,o)};var W=new r(N,k);h.onclick=function(e){var t=e||window.event,n=t.target||t.srcElement;if(""!==n.type){a($("#preset-groups >li.active-preset-category")[0],"active-preset-category");var i="#"+n.parentElement.className;o(n.parentElement,"active-preset-category"),a($("#standard >div.active-preset-category")[0],"active-preset-category"),o($(i)[0],"active-preset-category")}},g.onclick=function(e){a(i(".active-section"),"active-section"),o(this,"active-section")},l.onclick=function(e){a(i(".active-section"),"active-section"),o(this,"active-section")},s.onclick=function(e){a(i(".active-section"),"active-section"),o(this,"active-section")},l.onchange=function(e){var t,i=e||window.event,r=i.target||i.srcElement;t={option:r.getAttribute("data-option")},W&&void 0!==r.type&&("label"===r.tagName.toLowerCase()&&(r=r.querySelector("input")),t.optionJson=JSON.parse(t.option),E.checked=!0,n(t.optionJson.width,t.optionJson.height),a($(".box.btn.active-item")[0],"active-item"),o(r.parentNode,"active-item"),a($("#custom-sizes input")[0],"active-item"),c(r.id,t.optionJson.width,t.optionJson.height),ga("send","event","image","image cropped",t.option),k.ready=function(){console.log("ready")},W.setAspectRatio(r.value))},B.onclick=function(e){W.setAspectRatio("NaN")},E.onclick=function(e){n(Math.round(N.naturalWidth),Math.round(N.naturalHeight)),W.setAspectRatio(Math.round(N.naturalWidth)/Math.round(N.naturalHeight)),c("custom-crop",Math.round(N.naturalWidth),Math.round(N.naturalHeight)),I(function(){ga("send","event","image","image cropped",'{ "width": '+Math.round(N.naturalWidth)+', "height": '+Math.round(N.naturalHeight)+" }")},1e3)},s.oninput=function(e){var t=e||window.event,n=t.target||t.srcElement,a="custom-crop";E.checked=!0,W&&void 0!==n.type&&(W.setAspectRatio(Math.round(f.value)/Math.round(y.value)),c(a,Math.round(f.value),Math.round(y.value)),I(function(){ga("send","event","image","image cropped",'{ "width": '+p.value+', "height": '+v.value+" }")},1e3))},g.oninput=function(e){var n,i,d=e||window.event,u=d.target||d.srcElement;W&&void 0!==u.type&&("label"===u.tagName.toLowerCase()&&(u=u.querySelector("input")),"dataWidth"===u.id?(v.value=Math.round(u.value*(N.naturalHeight/N.naturalWidth)),H.checked=!0,i="resize-custom",datePercent.value=100/(N.naturalWidth/u.value)/100,datePercentValue.innerHTML=(100/(N.naturalWidth/u.value)).toFixed(2)):"dataHeight"===u.id?(p.value=Math.round(u.value*(N.naturalWidth/N.naturalHeight)),H.checked=!0,i="resize-custom",datePercent.value=100/(N.naturalHeight/u.value)/100,datePercentValue.innerHTML=(100/(N.naturalHeight/u.value)).toFixed(2)):"datePercent"===u.id&&(t(Math.round(N.naturalWidth*u.value),Math.round(N.naturalHeight*u.value)),datePercentValue.innerHTML=Math.round(100*u.value),b.checked=!0,i="resize-percent"),n=W.getImageData(),k.aspectRatio=n.aspectRatio,k.top=0,k.left=0,k.autoCropArea=1,I(function(){o($("#custom-sizes input")[0],"active-item"),a($(".box.btn.active")[0],"active-item"),c(i,p.value,v.value),ga("send","event","image","image cropped",'{ "width": '+p.value+', "height": '+v.value+" }"),u.disabled=!0,W.destroy(),W=new r(N,k),u.disabled=!1},1e3))},m.onclick=function(e){var t,n,a,o,i=e||window.event,c=i.target||i.srcElement;if(W&&(n={method:c.getAttribute("data-method"),option:c.getAttribute("data-option"),fileName:c.getAttribute("data-file-name")},"getCroppedCanvas"===n.method&&(n.optionJson=JSON.parse(n.option),a=n.fileName,t=W[n.method](n.optionJson)))){o=$('input[name="fileType"]:checked').val(),a+="image/jpeg"===o?".jpg":".png";var r=$("<a>").attr("href",t.toDataURL(o)).attr("download",a).appendTo("body");r[0].click(),r.remove(),ga("send","event","image","image downloaded",a)}}};