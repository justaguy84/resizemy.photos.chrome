!function(e,t,n,a,o,i,c){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),c=t.getElementsByTagName(n)[0],i.async=1,i.src=a,c.parentNode.insertBefore(i,c)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-101979275-1","auto"),ga("set","checkProtocolTask",function(){}),ga("require","displayfeatures"),ga("send","pageview","/cropper.html"),window.onload=function(){"use strict";function e(e,t,n){M.innerHTML=e,E.innerHTML="Original size: "+t+"x"+n}function t(e,t){v.value=Math.round(e),f.value=Math.round(t)}function n(e,t){y.value=Math.round(e),w.value=Math.round(t)}function a(e){datePercent.value=100/e/100,datePercentValue.innerHTML=(100/e).toFixed(2),datePercentValue.innerHTML>100?datePercentValue.style.color="red":datePercentValue.style.color=null}function o(e,t){e&&e.classList.remove(t)}function i(e,t){e&&e.classList.add(t)}function c(e){return document.querySelector(e)}function r(e,t,n){l.setAttribute("data-option",'{ "width": '+Math.round(t)+', "height": '+Math.round(n)+" }"),l.setAttribute("data-file-name",e+"-"+Math.round(t)+"x"+Math.round(n))}var d=window.Cropper,u=document.getElementById("img-container"),l=document.getElementById("prepareImage"),s=document.getElementById("preset"),g=document.getElementById("crop"),h=document.getElementById("resize"),m=document.getElementById("preset-groups"),p=document.getElementById("download"),v=document.getElementById("dataWidth"),f=document.getElementById("dataHeight"),y=document.getElementById("cropDataWidth"),w=document.getElementById("cropDataHeight"),M=document.getElementById("file-name"),E=document.getElementById("file-size"),B=document.getElementById("cutomCrop"),I=document.getElementById("freeMode"),k=document.getElementById("resizePercent"),H=document.getElementById("resizeCustom"),b=function(){var e=0;return function(t,n){clearTimeout(e),e=setTimeout(t,n)}}(),A={aspectRatio:16/9,zoomable:!1,checkCrossOrigin:!0,ready:function(e){console.log(e.type)},cropstart:function(e){console.log(e.type,e.detail.action)},cropmove:function(e){console.log(e.type,e.detail.action)},cropend:function(e){console.log(e.type,e.detail.action)},crop:function(e){var t=e.detail;"crop"==c(".active-section").id&&1==I.checked&&(n(Math.round(t.width),Math.round(t.height)),r("freeMode",t.width,t.height),b(function(){ga("send","event","image","image cropped",'{ "width": '+Math.round(t.width)+', "height": '+Math.round(t.height)+" }")},1e3)),console.log(e.type)},zoom:function(e){console.log(e.type,e.detail.ratio)}},N=window.location.hash.substring(1),T=u.getElementsByTagName("img").item(0);if(N){T.src=N,ga("send","event","image","image loaded",N);var z=new XMLHttpRequest;z.open("GET",N,!0),z.onreadystatechange=function(){4==z.readyState&&new d(T,{ready:function(){W.replace(N)}})},z.send()}T.onload=function(){var n=T.getAttribute("src"),a=T.naturalWidth,o=T.naturalHeight;e(n,a,o),t(a,o)};var W=new d(T,A);m.onclick=function(e){var t=e||window.event,n=t.target||t.srcElement;if(""!==n.type){o($("#preset-groups >li.active-preset-category")[0],"active-preset-category");var a="#"+n.parentElement.className;i(n.parentElement,"active-preset-category"),o($("#standard >div.active-preset-category")[0],"active-preset-category"),i($(a)[0],"active-preset-category")}},h.onclick=function(e){o(c(".active-section"),"active-section"),i(this,"active-section")},s.onclick=function(e){o(c(".active-section"),"active-section"),i(this,"active-section")},g.onclick=function(e){o(c(".active-section"),"active-section"),i(this,"active-section")},h.oninput=function(e){var n,c,d,u=e||window.event,l=u.target||u.srcElement;W&&void 0!==l.type&&("label"===l.tagName.toLowerCase()&&(l=l.querySelector("input")),"dataWidth"===l.id?(f.value=Math.round(l.value*(T.naturalHeight/T.naturalWidth)),H.checked=!0,d="resize-custom",a(T.naturalWidth/l.value)):"dataHeight"===l.id?(v.value=Math.round(l.value*(T.naturalWidth/T.naturalHeight)),H.checked=!0,d="resize-custom",a(T.naturalHeight/l.value)):"datePercent"===l.id&&(t(Math.round(T.naturalWidth*l.value),Math.round(T.naturalHeight*l.value)),datePercentValue.innerHTML=Math.round(100*l.value),datePercentValue.style.color=null,k.checked=!0,d="resize-percent"),n=W.getImageData(),c=W.getCanvasData(),W.setAspectRatio(n.aspectRatio),W.setCropBoxData(c),i($("#custom-sizes input")[0],"active-item"),o($(".box.btn.active")[0],"active-item"),r(d,v.value,f.value),b(function(){ga("send","event","image","image cropped",'{ "width": '+v.value+', "height": '+f.value+" }")},1e3))},I.onclick=function(e){W.setAspectRatio("NaN")},B.onclick=function(e){n(Math.round(T.naturalWidth),Math.round(T.naturalHeight)),W.setAspectRatio(Math.round(T.naturalWidth)/Math.round(T.naturalHeight)),r("custom-crop",Math.round(T.naturalWidth),Math.round(T.naturalHeight)),b(function(){ga("send","event","image","image cropped",'{ "width": '+Math.round(T.naturalWidth)+', "height": '+Math.round(T.naturalHeight)+" }")},1e3)},g.oninput=function(e){var t=e||window.event,n=t.target||t.srcElement,a="custom-crop";B.checked=!0,W&&void 0!==n.type&&(W.setAspectRatio(Math.round(y.value)/Math.round(w.value)),r(a,Math.round(y.value),Math.round(w.value)),b(function(){ga("send","event","image","image cropped",'{ "width": '+v.value+', "height": '+f.value+" }")},1e3))},s.onchange=function(e){var t,a=e||window.event,c=a.target||a.srcElement;t={option:c.getAttribute("data-option")},W&&void 0!==c.type&&("label"===c.tagName.toLowerCase()&&(c=c.querySelector("input")),t.optionJson=JSON.parse(t.option),B.checked=!0,n(t.optionJson.width,t.optionJson.height),o($(".box.btn.active-item")[0],"active-item"),i(c.parentNode,"active-item"),o($("#custom-sizes input")[0],"active-item"),r(c.id,t.optionJson.width,t.optionJson.height),b(function(){ga("send","event","image","image cropped",t.option)},1e3),A.ready=function(){console.log("ready")},W.setAspectRatio(c.value))},p.onclick=function(e){var t,n,a,o,i=e||window.event,c=i.target||i.srcElement;if(W&&(n={method:c.getAttribute("data-method"),option:c.getAttribute("data-option"),fileName:c.getAttribute("data-file-name")},"getCroppedCanvas"===n.method&&(n.optionJson=JSON.parse(n.option),a=n.fileName,t=W[n.method](n.optionJson)))){o=$('input[name="fileType"]:checked').val(),a+="image/jpeg"===o?".jpg":".png";var r=$("<a>").attr("href",t.toDataURL(o)).attr("download",a).appendTo("body");r[0].click(),r.remove(),ga("send","event","image","image downloaded",a)}}};